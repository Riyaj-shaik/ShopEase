<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Product Details</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">
  <div class="container mx-auto p-6">
    <a href="Allproducts.html" class="mt-4 bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700">‚Üê Back to Products</a>

    <div id="productDetails" class="bg-white p-6 rounded shadow-md flex flex-col md:flex-row gap-6">
      <!-- Image -->
      <div class="md:w-1/2">
        <img id="productImage" src="" alt="Product" class="w-full h-64 object-contain rounded" />
      </div>

      <!-- Info -->
      <div class="md:w-1/2">
        <h1 id="productName" class="text-2xl font-bold mb-2"></h1>
        <p id="productCategory" class="text-sm text-gray-500 mb-2"></p>
        <p id="productPrice" class="text-green-600 text-xl font-bold mb-4"></p>
        <p id="productDescription" class="text-gray-700 mb-6"></p>
        <button onclick="addToCart()" class="bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600">Add to Cart</button>
      </div>

      
    </div>

    <div class="text-right text-lg mb-4">
      üõí <a href="cart.html" class="mt-4 bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700">View Cart</a>
    </div>
  </div>

  <script>
    const productId = new URLSearchParams(window.location.search).get("id");
    let product = null;

    async function fetchProductDetails() {
      try {
        const response = await fetch(`http://localhost:8080/api/products/${productId}`);
        if (!response.ok) throw new Error("Product not found");

        product = await response.json();

        // Update HTML
        document.getElementById("productImage").src = product.imageUrl;
        document.getElementById("productName").textContent = product.name;
        document.getElementById("productCategory").textContent = `Category: ${product.category}`;
        document.getElementById("productPrice").textContent = `‚Çπ${Number(product.price).toLocaleString()}`;
        document.getElementById("productDescription").textContent = product.description || "No description available.";
      } catch (err) {
        document.getElementById("productDetails").innerHTML = `<p class="text-red-500 font-bold">‚ö†Ô∏è Failed to load product details</p>`;
        console.error(err);
      }
    }

    function addToCart() {
      let cart = JSON.parse(localStorage.getItem("cart") || "[]");
      cart.push({ name: product.name, price: product.price });
      localStorage.setItem("cart", JSON.stringify(cart));
      alert(`${product.name} added to cart!`);
    }

    fetchProductDetails();
  </script>
</body>
</html>
